<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin - Disponibilidad | El Mariachi</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body { background-color: #f8f9fa; }
    .browser-bar {
      background: #e9ecef;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 6px 10px;
      margin: 18px;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: #495057;
    }
    .card { border-radius: 10px; }
    .status-available { color: #198754; font-weight: 600; } /* green */
    .status-unavailable { color: #dc3545; font-weight: 600; } /* red */
    .admin-panel { min-height: 180px; }
    .catalog-item { padding: 12px 16px; border-bottom: 1px solid #e9ecef; display:flex; align-items:center; justify-content:space-between; }
    .catalog-item:last-child { border-bottom: none; }
    .add-btn { min-width: 90px; }
  </style>
</head>
<body>

  <!-- simulated browser/url bar -->
  <div class="browser-bar">https://www.ElMariachi.cl/admin/disponibilidad</div>

  <!-- main content -->
  <div class="container">
    <div class="row">

      <!-- Left: Catalogo cliente -->
      <div class="col-lg-8 mb-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Catálogo (cliente)</h5>
            <div id="catalogList" class="mt-3">
              <!-- items injected by JS, initial markup below as fallback -->
              <div class="catalog-item" data-id="101">
                <div>
                  <div class="fw-semibold">Nachos con queso</div>
                  <div class="small status-unavailable">No disponible</div>
                </div>
                <div>
                  <button class="btn btn-outline-secondary add-btn" disabled style="display:none">Agregar</button>
                </div>
              </div>

              <div class="catalog-item" data-id="102">
                <div>
                  <div class="fw-semibold">Taco al pastor</div>
                  <div class="small status-available">Disponible</div>
                </div>
                <div>
                  <button class="btn btn-sm btn-primary add-btn">Agregar</button>
                </div>
              </div>
            </div>
            <!-- big empty area like wireframe -->
            <div style="min-height:120px"></div>
          </div>
        </div>
      </div>

      <!-- Right: Admin panel -->
      <div class="col-lg-4 mb-4">
        <div class="card shadow-sm admin-panel">
          <div class="card-body">
            <h6 class="card-title">Admin: Disponibilidad</h6>

            <!-- admin list toggles -->
            <div id="adminList" class="mt-3">
              <!-- JS will render toggles; fallback markup: -->
              <div class="d-flex align-items-center justify-content-between mb-3" data-id="101">
                <div>
                  <div class="fw-semibold">Nachos con queso</div>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input toggle-availability" type="checkbox" id="avail-101" data-id="101" />
                  <label class="form-check-label small ms-2" for="avail-101">OFF</label>
                </div>
              </div>

              <div class="d-flex align-items-center justify-content-between mb-3" data-id="102">
                <div>
                  <div class="fw-semibold">Taco al pastor</div>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input toggle-availability" type="checkbox" id="avail-102" data-id="102" />
                  <label class="form-check-label small ms-2" for="avail-102">ON</label>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- API / notes box -->
    <div class="row">
      <div class="col-12">
        <div class="card bg-white border mt-2">
          <div class="card-body">
            <strong>API/Disponibilidad</strong>
            <pre style="background:#f7f7f7; padding:8px; border-radius:6px; margin-top:8px;">
PATCH /admin/products/{id}/availability    # { available: true | false }
Events: notificar catálogo (pub/sub)
Rules: ocultar 'Agregar' si no disponible
            </pre>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- footer -->
  <footer class="text-center py-3 mt-4">
    <small class="text-muted">© 2025 El Mariachi</small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // initial product data (id, name, available)
    const products = {
      101: { id:101, name: 'Nachos con queso', available: false },
      102: { id:102, name: 'Taco al pastor', available: true }
    };

    const catalogList = document.getElementById('catalogList


