<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin ‚Ä¢ Im√°genes | El Mariachi</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{--primary:#d32f2f;--hover:#b71c1c;--light:#f5f5f5;--text:#212121;--muted:#757575;--border:#e0e0e0;--success:#4caf50}
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--light);color:var(--text);font-family:Segoe UI,Roboto,Arial;padding-bottom:40px}
    .navbar{background:linear-gradient(135deg,var(--primary),var(--hover))}
    .navbar-brand{color:#fff;font-weight:800}
    .container{max-width:1000px}
    h1{color:var(--text);font-weight:700;font-size:28px;margin-bottom:24px}
    .menu-links{display:flex;gap:12px;margin-bottom:24px;flex-wrap:wrap}
    .menu-btn{padding:10px 16px;border:2px solid var(--border);background:#fff;border-radius:8px;font-weight:600;font-size:13px;cursor:pointer;transition:all 0.3s;color:var(--text);text-decoration:none;display:inline-block}
    .menu-btn:hover{border-color:var(--primary);background:rgba(211,47,47,0.05)}
    .menu-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}
    .card{border-radius:12px;border:1px solid var(--border);box-shadow:0 1px 3px rgba(0,0,0,0.08)}
    .upload-area{border:2px dashed var(--border);border-radius:8px;padding:24px;text-align:center;cursor:pointer;transition:all 0.3s}
    .upload-area:hover{border-color:var(--primary);background:rgba(211,47,47,0.02)}
    .upload-area.drag{border-color:var(--primary);background:rgba(211,47,47,0.08)}
    .preview-box{min-height:300px;border-radius:8px;background:#f9f9f9;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;margin:20px 0}
    .preview-box img{max-width:100%;max-height:100%;border-radius:6px}
    .validation-list{padding:16px;background:rgba(211,47,47,0.02);border-radius:8px;border-left:4px solid var(--primary)}
    .validation-item{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:13px}
    .validation-item.ok{color:var(--success)}
    .validation-item.no{color:#c62828}
    @media(max-width:768px){.menu-links{flex-direction:column}}
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg py-3">
    <div class="container d-flex align-items-center justify-content-between">
      <a class="navbar-brand" href="B-19PanelAdmin.html">üåÆ El Mariachi ‚Ä¢ Admin</a>
      <a class="btn btn-outline-light btn-sm" href="B-09ConstruccionPedido.html">‚Üê Salir Admin</a>
    </div>
  </nav>

  <div class="container my-5">
    <h1>Cargar Im√°genes de Productos</h1>

    <div class="menu-links">
      <a href="B-19PanelAdmin.html" class="menu-btn">üì¶ Productos</a>
      <a href="B-20TogglesdeDisponibilidad.html" class="menu-btn">‚úì Disponibilidad</a>
      <a href="B-21CargadeImagenes.html" class="menu-btn active">üì∏ Im√°genes</a>
      <a href="B-22Dashboard.html" class="menu-btn">üìä Dashboard</a>
      <a href="B-23GestionVisual.html" class="menu-btn">üë• Usuarios</a>
      <a href="B-24IndicadoresdeValidacion.html" class="menu-btn">‚úî Validaciones</a>
    </div>

    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Subir Imagen de Producto</h5>

        <div class="upload-area" id="uploadArea">
          <div style="color:var(--muted);font-size:14px">
            <div style="font-size:32px;margin-bottom:8px">üìÅ</div>
            <div style="font-weight:600;margin-bottom:4px">Arrastra tu imagen aqu√≠ o haz clic</div>
            <div style="font-size:12px">JPG, PNG ‚Ä¢ M√°x 2MB ‚Ä¢ M√≠n 600√ó800px</div>
          </div>
          <input type="file" id="fileInput" style="display:none" accept="image/jpeg,image/png">
        </div>

        <div class="preview-box" id="previewBox">
          <div style="color:var(--muted);text-align:center">
            <div style="font-size:48px;margin-bottom:8px">üñº</div>
            <div>Sin imagen</div>
          </div>
        </div>

        <div class="validation-list" id="validationList">
          <div style="font-weight:700;margin-bottom:12px;color:var(--text)">Validaciones:</div>
          <div class="validation-item" id="check-type"><span style="color:#ccc">‚óã</span> Tipo: JPG/PNG</div>
          <div class="validation-item" id="check-size"><span style="color:#ccc">‚óã</span> Tama√±o: ‚â§2 MB</div>
          <div class="validation-item" id="check-dims"><span style="color:#ccc">‚óã</span> Dimensiones: ‚â•600√ó800</div>
        </div>

        <button id="uploadBtn" class="btn btn-primary mt-3" style="width:100%">üíæ Guardar Imagen</button>
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-body">
        <strong>‚Ñπ Requerimientos</strong>
        <div style="color:var(--muted);font-size:13px;margin-top:10px">
          ‚Ä¢ Formatos: JPEG, PNG<br>
          ‚Ä¢ Tama√±o m√°ximo: 2 MB<br>
          ‚Ä¢ Dimensiones m√≠nimas: 600√ó800 p√≠xeles<br>
          ‚Ä¢ Las im√°genes se guardan en servidor y vinculan al producto
        </div>
      </div>
    </div>
  </div>

<script>
  const uploadArea = document.getElementById('uploadArea');
  const fileInput = document.getElementById('fileInput');
  const previewBox = document.getElementById('previewBox');
  const uploadBtn = document.getElementById('uploadBtn');
  let selectedFile = null;

  uploadArea.addEventListener('click', () => fileInput.click());
  uploadArea.addEventListener('dragover', (e) => { e.preventDefault(); uploadArea.classList.add('drag'); });
  uploadArea.addEventListener('dragleave', () => uploadArea.classList.remove('drag'));
  uploadArea.addEventListener('drop', (e) => { e.preventDefault(); uploadArea.classList.remove('drag'); handleFile(e.dataTransfer.files[0]); });

  fileInput.addEventListener('change', (e) => handleFile(e.target.files[0]));

  function validateImage(file) {
    const checks = { type: false, size: false, dims: false };
    const typeOk = ['image/jpeg', 'image/png'].includes(file.type);
    const sizeOk = file.size <= 2 * 1024 * 1024;
    
    const img = new Image();
    img.onload = () => {
      const dimsOk = img.width >= 600 && img.height >= 800;
      updateChecks({ type: typeOk, size: sizeOk, dims: dimsOk });
    };
    img.src = URL.createObjectURL(file);
  }

  function updateChecks(checks) {
    const items = { 'check-type': checks.type, 'check-size': checks.size, 'check-dims': checks.dims };
    Object.entries(items).forEach(([id, ok]) => {
      const el = document.getElementById(id);
      el.className = ok ? 'validation-item ok' : 'validation-item no';
      el.querySelector('span').textContent = ok ? '‚úì' : '‚úó';
    });
    uploadBtn.disabled = !Object.values(checks).every(v => v);
  }

  function handleFile(file) {
    if (!file) return;
    selectedFile = file;
    validateImage(file);
    const img = new Image();
    img.onload = () => {
      previewBox.innerHTML = '';
      previewBox.appendChild(img);
    };
    img.src = URL.createObjectURL(file);
  }

  uploadBtn.addEventListener('click', () => {
    if (!selectedFile) { alert('Selecciona una imagen'); return; }
    alert('Imagen subida correctamente');
    previewBox.innerHTML = '<div style="color:var(--muted);text-align:center"><div style="font-size:48px;margin-bottom:8px">‚úì</div><div>Imagen guardada</div></div>';
  });
</script>
</body>
</html>
